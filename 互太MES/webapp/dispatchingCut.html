<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>打印領盤頭單</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <script type="text/javascript" src="plugins/servies.js" ></script>
    <link rel="stylesheet" href="plugins/layui/css/layui.css" media="all" />
    <!-- <link rel="stylesheet" type="text/css" href="http://www.jq22.com/jquery/font-awesome.4.6.0.css"> -->
    <script src="build/js/dependencies/rsvp-3.1.0.min.js"></script>
    <script src="build/js/dependencies/sha-256.min.js"></script>
    <script type="text/javascript" src="build/js/qz-tray.js"></script>
    <script type="text/javascript" src="build/js/additional/jquery-1.11.3.min.js"></script>
</head>
<body>
    <div class="top">
        盤頭批次信息
    </div>
    <div class="tops">
        <label for="">機頭紙編號:</label><input type="text" id="JobsheetNo">
        <label for="" style="margin-left:30%">工作中心:</label><input type="text" id="materialNo">
    </div>
    <div class="tops">
        <button class="layui-btn layui-btn-mini">選擇全部</button><button class="layui-btn layui-btn-mini">取消選擇全部</button>
    </div>
    <div>
    <div>
        <span class="topss tab1" style="float:left">
            <table id="demo1" lay-filter="test1"></table>
                <ul id="WeightOfBatch1">
                    <li style="width:44px"></li>
                    <li style="width:120px">總重</li>
                    <li style="width:120px"></li>
                    <li style="width:120px"></li>
                    <li style="width:120px"></li>
                </ul>
                <br/>



            <i class="layui-icon shou" id='add1'>&#xe654;</i>&nbsp;&nbsp;<i class="layui-icon shou" id='delete1'>&#xe640;</i>&nbsp;&nbsp;<i class="layui-icon shou" id='search1'>&#xe615;</i>
        </span>
        <span class="topss tab2" style="float:left">
            <table id="demo2" lay-filter="test2"></table>
            <ul id="WeightOfBatch2">
                <li style="width:44px"></li>
                <li style="width:120px">總重</li>
                <li style="width:120px"></li>
                <li style="width:120px"></li>
                <li style="width:120px"></li>
            </ul>
            <br/>
            <i class="layui-icon shou" id='add2'>&#xe654;</i>&nbsp;&nbsp;<i class="layui-icon shou" id='delete2'>&#xe640;</i>&nbsp;&nbsp;<i class="layui-icon shou" id='search2'>&#xe615;</i>
        </span>
        <br>
    </div>
    <div>
        <span class="topss tab3" style="float:left">
            <table id="demo3" lay-filter="test3"></table>
            <ul id="WeightOfBatch3">
                <li style="width:44px"></li>
                <li style="width:120px">總重</li>
                <li style="width:120px"></li>
                <li style="width:120px"></li>
                <li style="width:120px"></li>
            </ul>
            <br/>
            <i class="layui-icon shou" id='add3'>&#xe654;</i>&nbsp;&nbsp;<i class="layui-icon shou" id='delete3'>&#xe640;</i>&nbsp;&nbsp;<i class="layui-icon shou" id='search3'>&#xe615;</i> 
        </span>
        <span class="topss tab4" style="float:left">
            <table id="demo4" lay-filter="test4"></table>
            <ul id="WeightOfBatch4">
                <li style="width:44px"></li>
                <li style="width:120px">總重</li>
                <li style="width:120px"></li>
                <li style="width:120px"></li>
                <li style="width:120px"></li>
            </ul>
            <br/>
            <i class="layui-icon shou" id='add4'>&#xe654;</i>&nbsp;&nbsp;<i class="layui-icon shou" id='delete4'>&#xe640;</i>&nbsp;&nbsp;<i class="layui-icon shou" id='search4'>&#xe615;</i>
        </span>
    </div>
    </div>
    <hr>
    <div>
        <button class="layui-btn layui-btn-small" style="margin:0 0 20px 45%" id="stamp">打印</button>
    </div>

<!-- 弹出框 -->

    <!-- GB1盤頭批次--新增 -->
<div id="addO_Add" class="pad dis">
    <label for="">GB1盤頭批次</label><input type="text" id="recode1">
</div>
<!-- GB1盤頭批次--删除 -->
<div id="addO_Delete" class="pad dis">
    刪除已選記錄
</div>
<!-- GB1盤頭批次--搜索 -->
<div id="addO_Search" class="pad dis">
    <div>
        <select name="" id="queryName1">
            <option value="BATCH_NO">GB1盤頭批次</option>
            <option value="BATCH_QNTY">批次重量(KG)</option>
            <option value="CREEL_NO">Creel No</option>
            <option value="PRINT_FLAG">工作中心</option>
        </select>
        <select name="" id="ueryCondition1">
            <option value="eq">等於</option>
            <option value="ne">不等於</option>
            <option value="bw">開始於</option>
            <option value="bn">不開始於</option>
            <option value="ew">結束於</option>
            <option value="en">不結束於</option>
            <option value="cn">包含</option>
            <option value="nc">不包含</option>
            <option value="in">is null</option>
            <option value="nn">is not null</option>
            <option value="bc">在其中</option>
            <option value="nb">不在其中</option>
        </select>
        <input type="text" id="queryValue1">
    </div>
</div>
<!-- GB2盤頭批次--新增 -->
<div id="addT_Add" class="pad dis">
    <label for="">GB2盤頭批次</label><input type="text" id="recode2">
</div>
<!-- GB2盤頭批次--删除 -->
<div id="addT_Delete" class="pad dis">
    刪除已選記錄
</div>
<!-- GB2盤頭批次--搜索 -->
<div id="addT_Search" class="pad dis">
    <div>
        <select name="" id="queryName2">
            <option value="BATCH_NO">GB2盤頭批次</option>
            <option value="BATCH_QNTY">批次重量(KG)</option>
            <option value="CREEL_NO">Creel No</option>
            <option value="PRINT_FLAG">工作中心</option>
        </select>
        <select name="" id="ueryCondition2">
            <option value="eq">等於</option>
            <option value="ne">不等於</option>
            <option value="bw">開始於</option>
            <option value="bn">不開始於</option>
            <option value="ew">結束於</option>
            <option value="en">不結束於</option>
            <option value="cn">包含</option>
            <option value="nc">不包含</option>
            <option value="in">is null</option>
            <option value="nn">is not null</option>
            <option value="bc">在其中</option>
            <option value="nb">不在其中</option>
        </select>
        <input type="text" id="queryValue2">
    </div>
</div>
<!-- GB3盤頭批次--新增 -->
<div id="addS_Add" class="pad dis">
    <label for="">GB3盤頭批次</label><input type="text" id="recode3">
</div>
<!-- GB3盤頭批次--删除 -->
<div id="addS_Delete" class="pad dis">
    刪除已選記錄
</div>
<!-- GB3盤頭批次--搜索 -->
<div id="addS_Search" class="pad dis">
    <div>
        <select name="" id="">
            <option value="BATCH_NO">GB3盤頭批次</option>
            <option value="BATCH_QNTY">批次重量(KG)</option>
            <option value="CREEL_NO">Creel No</option>
            <option value="PRINT_FLAG">工作中心</option>
        </select>
        <select name="" id="">
            <option value="eq">等於</option>
            <option value="ne">不等於</option>
            <option value="bw">開始於</option>
            <option value="bn">不開始於</option>
            <option value="ew">結束於</option>
            <option value="en">不結束於</option>
            <option value="cn">包含</option>
            <option value="nc">不包含</option>
            <option value="in">is null</option>
            <option value="nn">is not null</option>
            <option value="bc">在其中</option>
            <option value="nb">不在其中</option>
        </select>
        <input type="text">
    </div>
</div>
<!-- GB4盤頭批次--新增 -->
<div id="addF_Add" class="pad dis">
    <label for="">GB4盤頭批次</label><input type="text" id="recode4">
</div>
<!-- GB4盤頭批次--删除 -->
<div id="addF_Delete" class="pad dis">
    刪除已選記錄
</div>
<!-- GB4盤頭批次--搜索 -->
<div id="addF_Search" class="pad dis">
    <div>
        <select name="" id="">
            <option value="BATCH_NO">GB4盤頭批次</option>
            <option value="BATCH_QNTY">批次重量(KG)</option>
            <option value="CREEL_NO">Creel No</option>
            <option value="PRINT_FLAG">工作中心</option>
        </select>
        <select name="" id="">
            <option value="eq">等於</option>
            <option value="ne">不等於</option>
            <option value="bw">開始於</option>
            <option value="bn">不開始於</option>
            <option value="ew">結束於</option>
            <option value="en">不結束於</option>
            <option value="cn">包含</option>
            <option value="nc">不包含</option>
            <option value="in">is null</option>
            <option value="nn">is not null</option>
            <option value="bc">在其中</option>
            <option value="nb">不在其中</option>
        </select>
        <input type="text">
    </div>
</div>
</body>
<script type="text/javascript" src="plugins/layui/layui.all.js"></script>
<script type="text/javascript" src="plugins/layui/lay/modules/table.js"></script>
<!-- <script src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.11.3.min.js"></script> -->
<script>
    //特别注意：以下4个表格因增加、删除不走后台，前端需加模拟数据，因此layUI的表格重载时不能修改数据，故增加、删除时会ajax请求，然后在加入数据显示数据表格，此方法虽然繁琐，但却实用。
    // var colArr = 
    // arrchangeL(colArr);
    $(document).ready(function(){
    //表格--数据渲染
    layui.use('table', function(){
        var table = layui.table;

        //session传过来的值
        // var receive1 = sessionStorage["unitGroup1"];  
        // var receive2 = sessionStorage["unitGroup2"];  
        // var receive3 = sessionStorage["unitGroup3"];
        // var receive4 = sessionStorage["unitGroup4"];  
        // var receive5 = sessionStorage["unitGroup5"];  
        // var receive6 = sessionStorage["unitGroup6"];
        // var receive7 = sessionStorage["unitGroup7"];  
        // var receive8 = sessionStorage["unitGroup8"];  
        // var receive9 = sessionStorage["unitGroup9"];
        // var receive10 = sessionStorage["unitGroup10"];  
        // var receive11 = sessionStorage["unitGroup11"];
        var printParams = {};
        // console.log(window.location.href.split('?')[1].split('&'))
        if (window.location.href.split('?')[1]) {
            window.location.href.split('?')[1].split('&').forEach(function(item,idx){
                var k = item.split('=')[0];
                var v = item.split('=')[1];
                printParams[k] = v;
            })
        }
        console.log(printParams)
        var receive1 = printParams.loca1;  
        var receive2 = printParams.loca2;  
        var receive3 = printParams.loca3;
        var receive4 = printParams.hdnOrderItem1;  
        var receive5 = printParams.hdnOrderItem2;  
        var receive6 = printParams.hdnOrderItem3;
        var receive7 = printParams.hdnOrderItem4;  
        var receive8 = printParams.Mat1;  
        var receive9 = printParams.Mat2;
        var receive10 = printParams.Mat3;  
        var receive11 = printParams.Mat4;
        console.log("session传过来的值---------------------------------------------")
        console.log(receive1)
        console.log(receive2)
        console.log(receive3)
        console.log(receive4)
        console.log(receive5)
        console.log(receive6)
        console.log(receive7)
        console.log(receive8)
        console.log(receive9)
        console.log(receive10)
        console.log(receive11)
        $("#JobsheetNo").val(receive2);
        $("#materialNo").val(receive3);
        //  data1,data2,data3,data4:ajax获取请求表格数据的载体，方便在增加、删除、搜索时直接加入数据显示表格
        var data1=[],data2=[],data3=[],data4=[];
        // setTable1()
        // setTable2()
        // setTable3()
        // setTable4()
        var addData1={},addData2={},addData3={},addData4={};   //获取增加的数据--push到data里面
        var reco1={},reco2={},reco3={},reco4={};       //打印--复选框传参
        var record2={},record3={},record4={};       //打印--复选框传参
        var cord1=[],cord2=[],cord3=[],cord4=[];               //打印--复选框传参
        var jusdge1,jusdge2,jusdge3,jusdge4;                   //判断复选框是否选中--true/false
        var i1,i2,i3,i4;                                       //删除里面for循环的i
        var unit1,unit2,unit3,unit4;                           //复选框勾选后赋值比较
        var group1 = [],group2 = [],group3 = [],group4 = [];   //判断是否有勾选，来进行删除
        var groups1 = {},groups2 = {},groups3 = {},groups4 = {};
        var batch1 = 0,batch2 = 0,batch3 = 0,batch4 = 0;
        var printsNum1='',printsNum2='',printsNum3=[];        //打印时--传参
        
        //表格1--ajax获取数据
        $.ajax({
            url:getAjaxURL('/warpMachineJobSheet/getBeamPickingList'), //数据接口
            // async:false,
            data:{
                OrderNo: receive1, 
                OrderItem: receive4,
                MaterialNo:receive8,
                JobsheetNo:receive2
            },
            success:function(res){
                if (res.status == 200) {
                    data1 = res.data;   //此处的data
                    console.log(data1);
                    if (data1.length != 0) {
                        for(var i1 = 0;i1<data1.length;i1++){
                            batch1 += parseFloat(data1[i1].BATCH_QNTY)
                        };
                    }
                    $('#WeightOfBatch1 li:eq(2)').html(batch1.toFixed(2))
                    setTable1()
                } else {
                    layer.alert(res.message, {title: "提示"});
                }
            }
        });

        //表格2--ajax获取数据
        $.ajax({
            url:getAjaxURL('/warpMachineJobSheet/getBeamPickingList'), //数据接口
            // async:false,
            data:{
                OrderNo: receive1, 
                OrderItem: receive5,
                MaterialNo:receive9,
                JobsheetNo:receive2
            },
            success:function(res){
                if (res.status == 200) {
                    data2 = res.data;   //此处的data
                    console.log(data2)
                    if (data2.length != 0) {
                        for(var i2 = 0;i2<data2.length;i2++){
                            batch2 += parseFloat(data2[i2].BATCH_QNTY)
                        };
                        $('#WeightOfBatch2 li:eq(2)').html(batch2.toFixed(2))
                    }
                    setTable2()
                } else {
                    layer.alert(res.message, {title: "提示"});
                }
            }
        });

        //表格3--ajax获取数据
        $.ajax({
            url:getAjaxURL('/warpMachineJobSheet/getBeamPickingList'), //数据接口
            // async:false,
            data:{
                OrderNo: receive1, 
                OrderItem: receive6,
                MaterialNo:receive10,
                JobsheetNo:receive2
            },
            success:function(res){
                if (res.status == 200) {
                    data3 = res.data;   //此处的data
                    console.log(data3)
                    if (data3.length != 0) {
                        for(var i3 = 0;i3<data3.length;i3++){
                            batch3 += parseFloat(data3[i3].BATCH_QNTY)
                        };
                    }
                    $('#WeightOfBatch3 li:eq(2)').html(batch3.toFixed(2))
                    setTable3()
                } else {
                    layer.alert(res.message, {title: "提示"});
                }
            }
        });

        //表格4--ajax获取数据
        $.ajax({
            url:getAjaxURL('/warpMachineJobSheet/getBeamPickingList'), //数据接口
            // async:false,
            data:{
                OrderNo: receive1, 
                OrderItem: receive7,
                MaterialNo:receive11,
                JobsheetNo:receive2
            },
            success:function(res){
                if (res.status == 200) {
                    data4 = res.data;   //此处的data
                    console.log(data4)
                    if (data4.length != 0) {
                        for(var i4 = 0;i4<data4.length;i4++){
                            batch4 += parseFloat(data4[i4].BATCH_QNTY)
                        };
                    }
                    $('#WeightOfBatch4 li:eq(2)').html(batch4.toFixed(2))
                    setTable4()
                } else {
                    layer.alert(res.message, {title: "提示"});
                }
            }
        });
        
        function setTable1(){
            //第一个表格
            table.render({
                elem: '#demo1',
                height: 315,
                // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                data:data1,
                cols: [[ //表头
                    {checkbox: true},
                    {field: 'BATCH_NO', title: 'GB1盤頭批次', width:120},
                    {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                    {field: 'CREEL_NO', title: 'Creel No', width:120},
                    {field: 'PRINT_FLAG', title: '工作中心', width:120},
                ]],
                done: function (res,curr,count) {
                    $('.layui-table-cell')[0].style.zIndex = '-2';
                    // $('.layui-form').append("<tr><td></td><td>总重</td><td></td><td></td><td></td></tr>")
                }
            });
        }
        // GB1盤頭批次--新增
        $("#add1").click(function(){
            console.log(123)
            layer.open({
                area: ['400px', '280px']
                ,title:'新增記錄'
                ,type:1
                ,content: $('#addO_Add')
                ,btn: ['提交', '取消']
                ,cancel: function(){ 
                    $('#addO_Add').css('display','none')
                }
                ,yes: function(index, layero){
                    addData1.BATCH_NO = $("#recode1").val();
                    addData1.BATCH_QNTY = '';
                    addData1.CREEL_NO = '';
                    addData1.PRINT_FLAG = '';
                    // data2.push(addData2);
                    data1.push(addData1);
                    //第一个表格--新增一条数据
                    table.render({
                        elem: '#demo1',
                        height: 315,
                        // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                        data:data1,
                        cols: [[ //表头
                            {checkbox: true},
                            {field: 'BATCH_NO', title: 'GB1盤頭批次', width:120},
                            {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                            {field: 'CREEL_NO', title: 'Creel No', width:120},
                            {field: 'PRINT_FLAG', title: '工作中心', width:120},
                        ]],
                        done: function (res,curr,count) {
                            $('.layui-table-cell')[0].style.zIndex = '-2';
                        }
                    });
                    addData1={};
                    $("#recode1").val("")  //清空-GB1盤頭批次-input框
                    layer.close(index)  //取消加载中
                    $('#addO_Add').css('display','none')
                    groups1 = {}
                    group1 = []
                }
                ,btn2: function(index, layero){
                    layer.closeAll();
                    $('#addO_Add').css('display','none')
                }
            });
        });
        // GB1盤頭批次--删除
        $("#delete1").click(function(){
            if(group1 === undefined||group1.length == 0){
                layer.alert('請選擇壹行', {
                    title: "提示"
                });
            }else{
                layer.open({
                    area: ['400px', '280px']
                    ,title:'删除'
                    ,type:1
                    ,content: $('#addO_Delete')
                    ,btn: ['删除', '取消']
                    ,cancel: function(){ 
                        $('#addO_Delete').css('display','none')
                    }
                    ,yes: function(index, layero){
                        table.render({
                            elem: '#demo1',
                            height: 315,
                            // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                            data:data1,
                            cols: [[ //表头
                                {checkbox: true},
                                {field: 'BATCH_NO', title: 'GB1盤頭批次', width:120},
                                {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                                {field: 'CREEL_NO', title: 'Creel No', width:120},
                                {field: 'PRINT_FLAG', title: '工作中心', width:120},
                            ]],
                            done: function (res,curr,count) {
                                $('.layui-table-cell')[0].style.zIndex = '-2';
                            }
                        });
                        
                        groups1 = {}
                        group1 = []
                        layer.close(index);
                        $('#addO_Delete').css('display','none')
                    }
                    ,btn2: function(index, layero){
                        layer.closeAll();
                        $('#addO_Delete').css('display','none')
                    }
                });
            }
        });
        // GB1盤頭批次--搜索
        $("#search1").click(function(){
            // console.log(123)
            layer.open({
                area: ['450px', '280px']
                ,title:'搜尋'
                ,type:1
                ,content: $('#addO_Search')
                ,btn: ['搜尋', '取消']
                ,cancel: function(){ 
                    $('#addO_Search').css('display','none')
                }
                ,yes: function(index, layero){
                    $.ajax({
                        url:getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                        data:{
                            OrderNo: receive1, 
                            OrderItem: receive4,
                            MaterialNo:receive8,
                            queryName:document.getElementById("queryName1").value,
                            queryCondition:document.getElementById("ueryCondition1").value,
                            queryValue:document.getElementById("queryValue1").value
                        },
                        success:function(res){
                            console.log(res)
                            if(res.status == 200){
                                table.render({
                                    elem: '#demo1',
                                    height: 315,
                                    // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                                    data:res.data,
                                    cols: [[ //表头
                                        {checkbox: true},
                                        {field: 'BATCH_NO', title: 'GB1盤頭批次', width:120},
                                        {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                                        {field: 'CREEL_NO', title: 'Creel No', width:120},
                                        {field: 'PRINT_FLAG', title: '工作中心', width:120},
                                    ]],
                                    done: function (res,curr,count) {
                                        $('.layui-table-cell')[0].style.zIndex = '-2';
                                    }
                                });
                                layer.closeAll();
                                $('#addO_Search').css('display','none')
                                $("#queryValue1").val("")
                            }else{
                                layer.alert(res.message, {
                                    title: "提示"
                                });
                            }
                        }
                    })
                    groups1 = {}
                    group1 = []
                }
                ,btn2: function(index, layero){
                    layer.closeAll();
                    $('#addO_Search').css('display','none')
                }
            });
        })
      
        //表格1-监听复选框选择--获取行数据
        table.on('checkbox(test1)', function(obj){
            // console.log(obj.checked); //当前是否选中状态
            console.log(obj.data); //选中行的相关数据
            // console.log(obj.type); //如果触发的是全选，则为：all，如果触发的是单选，则为：one
            delete obj.data.UNIT;
            // delete obj.data.PRINT_FLAG;
            delete obj.data.LAY_TABLE_INDEX;
            // delete obj.data.CREEL_NO;
            delete obj.data.LAY_CHECKED;
            jusdge1 = obj.checked;
            console.log(obj.data);
            console.log(jusdge1)
            unit1 = obj.data;
            if(jusdge1 == true){      //删除中判断是否有勾选框
                group1.push(obj.data)
                console.log(1)
                console.log(group1)
                // groups2.push(group2)
            }else if(jusdge1 == false){
                group1.forEach(function(value,index){
                    if(cmp(group1[index],obj.data)==true){
                        group1.splice(index,1)    //删除相同的对象
                        console.log(0)
                        console.log(group1)
                    };
                })
            };
        });
        


        function setTable2(){
            //第二个表格
            table.render({
                elem: '#demo2',
                height: 315,
                // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                data:data2,
                cols: [[ //表头
                    {checkbox: true},
                    {field: 'BATCH_NO', title: 'GB2盤頭批次', width:120},
                    {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                    {field: 'CREEL_NO', title: 'Creel No', width:120},
                    {field: 'PRINT_FLAG', title: '工作中心', width:120},
                ]],
                done: function (res,curr,count) {
                    $('.tab2 .layui-table-cell')[0].style.zIndex = '-2';
                }
            });
        }
        // GB2盤頭批次--新增
        $("#add2").click(function(){
            console.log(123)
            layer.open({
                area: ['400px', '280px']
                ,title:'新增記錄'
                ,type:1
                ,content: $('#addT_Add')
                ,btn: ['提交', '取消']
                ,cancel: function(){ 
                    $('#addT_Add').css('display','none')
                }
                ,yes: function(index, layero){
                    addData2.BATCH_NO = $("#recode2").val();
                    addData2.BATCH_QNTY = '';
                    addData2.CREEL_NO = '';
                    addData2.PRINT_FLAG = '';
                    data2.push(addData2);
                    //第二个表格--新增一条数据
                    table.render({
                        elem: '#demo2',
                        height: 315,
                        // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                        data:data2,
                        cols: [[ //表头
                            {checkbox: true},
                            {field: 'BATCH_NO', title: 'GB2盤頭批次', width:120},
                            {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                            {field: 'CREEL_NO', title: 'Creel No', width:120},
                            {field: 'PRINT_FLAG', title: '工作中心', width:120},

                        ]],
                        done: function (res,curr,count) {
                            $('.tab2 .layui-table-cell')[0].style.zIndex = '-2';
                        }
                    });
                    addData2={};
                    $("#recode2").val("")  //清空-GB2盤頭批次-input框
                    layer.close(index)  //取消加载中
                    $('#addT_Add').css('display','none')
                    groups2 = {}
                    group2 = []
                }
                ,btn2: function(index, layero){
                    layer.closeAll();
                    $('#addT_Add').css('display','none')
                }
            });
        });
        // GB2盤頭批次--删除
        $("#delete2").click(function(){
            if(group2 === undefined||group2.length == 0){
                layer.alert('請選擇壹行', {
                    title: "提示"
                });
            }else{
                layer.open({
                    area: ['400px', '280px']
                    ,title:'删除'
                    ,type:1
                    ,content: $('#addT_Delete')
                    ,btn: ['删除', '取消']
                    ,cancel: function(){ 
                        $('#addT_Delete').css('display','none')
                    }
                    ,yes: function(index, layero){
                        table.render({
                            elem: '#demo2',
                            height: 315,
                            // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                            data:data2,
                            cols: [[ //表头
                                {checkbox: true},
                                {field: 'BATCH_NO', title: 'GB2盤頭批次', width:120},
                                {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                                {field: 'CREEL_NO', title: 'Creel No', width:120},
                                {field: 'PRINT_FLAG', title: '工作中心', width:120},
                            ]],
                            done: function (res,curr,count) {
                                $('.tab2 .layui-table-cell')[0].style.zIndex = '-2';
                            }
                        });
                        
                        groups2 = {}
                        group2 = []
                        layer.close(index);
                        $('#addT_Delete').css('display','none')
                    }
                    ,btn2: function(index, layero){
                        layer.closeAll();
                        $('#addT_Delete').css('display','none')
                    }
                });
            }
        });
        // GB2盤頭批次--搜索
        $("#search2").click(function(){
            // console.log(123)
            layer.open({
                area: ['450px', '280px']
                ,title:'搜尋'
                ,type:1
                ,content: $('#addT_Search')
                ,btn: ['搜尋', '重設']
                ,cancel: function(){ 
                    $('#addT_Search').css('display','none')
                }
                ,yes: function(index, layero){
                    $.ajax({
                        url:getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                        data:{
                            OrderNo: receive1, 
                            OrderItem: receive5,
                            MaterialNo:receive9,
                            queryName:document.getElementById("queryName2").value,
                            queryCondition:document.getElementById("ueryCondition2").value,
                            queryValue:document.getElementById("queryValue2").value
                        },
                        success:function(res){
                            console.log(res)
                            table.render({
                                elem: '#demo2',
                                height: 315,
                                // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                                data:res.data,
                                cols: [[ //表头
                                    {checkbox: true},
                                    {field: 'BATCH_NO', title: 'GB2盤頭批次', width:120},
                                    {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                                    {field: 'CREEL_NO', title: 'Creel No', width:120},
                                    {field: 'PRINT_FLAG', title: '工作中心', width:120},
                                ]],
                                done: function (res,curr,count) {
                                    $('.tab2 .layui-table-cell')[0].style.zIndex = '-2';
                                }
                            });
                            $("#queryValue2").val("");
                            layer.closeAll();
                            $('#addT_Search').css('display','none');
                        }
                    })
                    groups2 = {}
                    group2 = []
                }
                ,btn2: function(index, layero){
                    
                }
            });
        });
        //表格2-监听复选框选择--获取行数据
        table.on('checkbox(test2)', function(obj){
            // console.log(obj.checked); //当前是否选中状态
            // console.log(obj.data); //选中行的相关数据
            // console.log(obj.type); //如果触发的是全选，则为：all，如果触发的是单选，则为：one
            delete obj.data.UNIT;
            // delete obj.data.PRINT_FLAG;
            delete obj.data.LAY_TABLE_INDEX;
            // delete obj.data.CREEL_NO;
            delete obj.data.LAY_CHECKED;
            jusdge2 = obj.checked;
            console.log(obj.data);
            console.log(jusdge2)
            unit2 = obj.data;
            if(jusdge2 == true){      //删除中判断是否有勾选框
                group2.push(obj.data)
                console.log(1)
                console.log(group2)
                // groups2.push(group2)
            }else if(jusdge2 == false){
                group2.forEach(function(value,index){
                    if(cmp(group2[index],obj.data)==true){
                        group2.splice(index,1)    //删除相同的对象
                        console.log(0)
                        console.log(group2)
                    };
                })
            };
            // if(data2===undefined||data2.length==0){
            //     data2.push(unit2)
            //     console.log(data2)
            // }else{
            //     try{        //跳出foreach循环
            //         data2.forEach(function(value,index){
            //             if(jusdge2 == true){
            //                 if(cmp(data2[index],unit2)==true){
            //                     data2.splice(index,1)    //删除相同的对象
            //                     console.log(data2)
            //                 }
            //             }else if(jusdge2 == false){
            //                 if(cmp(data2[index],unit2)!==true){
            //                     data2.push(unit2)
            //                     console.log(data2)
            //                     foreach.break=new Error("StopIteration");
            //                 }
            //             }
            //         })
            //     }catch(e){
            //         console.log(e.message);
            //         if(e.message==="foreach is not defined") {
            //             console.log("跳出来了?");//
            //             return;
            //         }else throw e;
            //     }//可以跳出来,那么 我们可以重写foreach方法
            // }
        });
        


        function setTable3(){
            //第三个表格
            table.render({
                elem: '#demo3',
                height: 315,
                // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                data:data3,
                cols: [[ //表头
                    {checkbox: true},
                    {field: 'BATCH_NO', title: 'GB3盤頭批次', width:120},
                    {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                    {field: 'CREEL_NO', title: 'Creel No', width:120},
                    {field: 'PRINT_FLAG', title: '工作中心', width:120},
                ]],
                done: function (res,curr,count) {
                    $('.tab3 .layui-table-cell')[0].style.zIndex = '-2';
                }
            });
        }
        // GB3盤頭批次--新增
        $("#add3").click(function(){
            console.log(123)
            layer.open({
                area: ['400px', '280px']
                ,title:'新增記錄'
                ,type:1
                ,content: $('#addS_Add')
                ,btn: ['提交', '取消']
                ,cancel: function(){ 
                    $('#addS_Add').css('display','none')
                }
                ,yes: function(index, layero){
                    addData3.BATCH_NO = $("#recode3").val();
                    addData3.BATCH_QNTY = '';
                    addData3.CREEL_NO = '';
                    addData3.PRINT_FLAG = '';
                    // data2.push(addData2);
                    data3.push(addData3);
                    //第二个表格--新增一条数据
                    table.render({
                        elem: '#demo3',
                        height: 315,
                        // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                        data:data3,
                        cols: [[ //表头
                            {checkbox: true},
                            {field: 'BATCH_NO', title: 'GB3盤頭批次', width:120},
                            {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                            {field: 'CREEL_NO', title: 'Creel No', width:120},
                            {field: 'PRINT_FLAG', title: '工作中心', width:120},
                        ]],
                        done: function (res,curr,count) {
                            $('.tab3 .layui-table-cell')[0].style.zIndex = '-2';
                        }
                    });
                    addData3={};
                    $("#recode3").val("")  //清空-GB2盤頭批次-input框
                    layer.close(index)  //取消加载中
                    $('#addS_Add').css('display','none')
                    console.log(data3)
                    groups3 = {}
                    group3 = []
                }
                ,btn2: function(index, layero){
                    layer.closeAll();
                    $('#addS_Add').css('display','none')
                }
            });
        });
        // GB3盤頭批次--删除
        $("#delete3").click(function(){
            if(group3 === undefined||group3.length == 0){
                layer.alert('請選擇壹行', {
                    title: "提示"
                });
            }else{
                layer.open({
                    area: ['400px', '280px']
                    ,title:'删除'
                    ,type:1
                    ,content: $('#addS_Delete')
                    ,btn: ['删除', '取消']
                    ,cancel: function(){ 
                        $('#addS_Delete').css('display','none')
                    }
                    ,yes: function(index, layero){
                        table.render({
                            elem: '#demo3',
                            height: 315,
                            // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                            data:data3,
                            cols: [[ //表头
                                {checkbox: true},
                                {field: 'BATCH_NO', title: 'GB3盤頭批次', width:120},
                                {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                                {field: 'CREEL_NO', title: 'Creel No', width:120},
                                {field: 'PRINT_FLAG', title: '工作中心', width:120},
                            ]],
                            done: function (res,curr,count) {
                                $('.tab3 .layui-table-cell')[0].style.zIndex = '-2';
                            }
                        });
                        
                        groups3 = {}
                        group3 = []
                        layer.close(index);
                        $('#addS_Delete').css('display','none')
                    }
                    ,btn2: function(index, layero){
                        layer.closeAll();
                        $('#addS_Delete').css('display','none')
                    }
                });
            }
        });
        // GB3盤頭批次--搜索
        $("#search3").click(function(){
            // console.log(123)
            layer.open({
                area: ['450px', '280px']
                ,title:'删除'
                ,type:1
                ,content: $('#addS_Search')
                ,btn: ['删除', '取消']
                ,cancel: function(){ 
                    $('#addS_Search').css('display','none')
                }
                ,yes: function(index, layero){
                    $.ajax({
                        url:getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                        data:{
                            OrderNo: receive1, 
                            OrderItem: receive6,
                            MaterialNo:receive10,
                            queryName:document.getElementById("queryName3").value,
                            queryCondition:document.getElementById("ueryCondition3").value,
                            queryValue:document.getElementById("queryValue3").value
                        },
                        success:function(res){
                            console.log(res)
                            table.render({
                                elem: '#demo3',
                                height: 315,
                                // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                                data:res.data,
                                cols: [[ //表头
                                    {checkbox: true},
                                    {field: 'BATCH_NO', title: 'GB3盤頭批次', width:120},
                                    {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                                    {field: 'CREEL_NO', title: 'Creel No', width:120},
                                    {field: 'PRINT_FLAG', title: '工作中心', width:120},
                                ]],
                                done: function (res,curr,count) {
                                    $('.tab3 .layui-table-cell')[0].style.zIndex = '-2';
                                }
                            });
                            $("#queryValue3").val("");
                            layer.closeAll();
                            $('#addS_Search').css('display','none');
                        }
                    })
                    groups3 = {}
                    group3 = []
                }
                ,btn2: function(index, layero){
                    layer.closeAll();
                    $('#addS_Search').css('display','none')
                }
            });
        });
        //表格3-监听复选框选择--获取行数据
        table.on('checkbox(test3)', function(obj){
            // console.log(obj.checked); //当前是否选中状态
            // console.log(obj.data); //选中行的相关数据
            // console.log(obj.type); //如果触发的是全选，则为：all，如果触发的是单选，则为：one
            delete obj.data.UNIT;
            // delete obj.data.PRINT_FLAG;
            delete obj.data.LAY_TABLE_INDEX;
            // delete obj.data.CREEL_NO;
            delete obj.data.LAY_CHECKED;
            jusdge3 = obj.checked;
            console.log(obj.data);
            console.log(jusdge3)
            unit3 = obj.data;
            if(jusdge3 == true){      //删除中判断是否有勾选框
                group3.push(obj.data)
                console.log(1)
                console.log(group3)
                // groups2.push(group2)
            }else if(jusdge3 == false){
                group3.forEach(function(value,index){
                    if(cmp(group3[index],obj.data)==true){
                        group3.splice(index,1)    //删除相同的对象
                        console.log(0)
                        console.log(group3)
                    };
                })
            };
        });
        


        function setTable4(){
            //第四个表格
            table.render({
                elem: '#demo4',
                height: 315,
                // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                data: data4, //开启分页
                cols: [[ //表头
                    {checkbox: true},
                    {field: 'BATCH_NO', title: 'GB4盤頭批次', width:120},
                    {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                    {field: 'CREEL_NO', title: 'Creel No', width:120},
                    {field: 'PRINT_FLAG', title: '工作中心', width:120},
                ]],
                done: function (res,curr,count) {
                    $('.tab4 .layui-table-cell')[0].style.zIndex = '-2';
                }
            });
        }
        // GB4盤頭批次--新增
        $("#add4").click(function(){
            console.log(123)
            layer.open({
                area: ['400px', '280px']
                ,title:'新增記錄'
                ,type:1
                ,content: $('#addF_Add')
                ,btn: ['提交', '取消']
                ,cancel: function(){ 
                    $('#addF_Add').css('display','none')
                }
                ,yes: function(index, layero){
                    addData4.BATCH_NO = $("#recode4").val();
                    addData4.BATCH_QNTY = '';
                    addData4.CREEL_NO = '';
                    addData4.PRINT_FLAG = '';
                    // data2.push(addData2);
                    data4.push(addData4);
                    //第二个表格--新增一条数据
                    table.render({
                        elem: '#demo4',
                        height: 315,
                        // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                        data:data4,
                        cols: [[ //表头
                            {checkbox: true},
                            {field: 'BATCH_NO', title: 'GB2盤頭批次', width:120},
                            {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                            {field: 'CREEL_NO', title: 'Creel No', width:120},
                            {field: 'PRINT_FLAG', title: '工作中心', width:120},
                        ]],
                        done: function (res,curr,count) {
                            $('.tab4 .layui-table-cell')[0].style.zIndex = '-2';
                        }
                    });
                    addData4={};
                    $("#recode4").val("")  //清空-GB2盤頭批次-input框
                    layer.close(index)  //取消加载中
                    $('#addF_Add').css('display','none')
                    groups4 = {}
                    group4 = []
                }
                ,btn2: function(index, layero){
                    layer.closeAll();
                    $('#addF_Add').css('display','none')
                }
            });
        });
        // GB4盤頭批次--删除
        $("#delete4").click(function(){
            if(group4 === undefined||group4.length == 0){
                layer.alert('請選擇壹行', {
                    title: "提示"
                });
            }else{
                layer.open({
                    area: ['400px', '280px']
                    ,title:'删除'
                    ,type:1
                    ,content: $('#addF_Delete')
                    ,btn: ['删除', '取消']
                    ,cancel: function(){ 
                        $('#addF_Delete').css('display','none')
                    }
                    ,yes: function(index, layero){
                        table.render({
                            elem: '#demo4',
                            height: 315,
                            // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                            data:data4,
                            cols: [[ //表头
                                {checkbox: true},
                                {field: 'BATCH_NO', title: 'GB2盤頭批次', width:120},
                                {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                                {field: 'CREEL_NO', title: 'Creel No', width:120},
                                {field: 'PRINT_FLAG', title: '工作中心', width:120},
                            ]],
                            done: function (res,curr,count) {
                                $('.tab4 .layui-table-cell')[0].style.zIndex = '-2';
                            }
                        });
                        
                        groups4 = {}
                        group4 = []
                        layer.close(index);
                        $('#addF_Delete').css('display','none')
                    }
                    ,btn2: function(index, layero){
                        layer.closeAll();
                        $('#addF_Delete').css('display','none')
                    }
                });
            }
        });
        // GB4盤頭批次--搜索
        $("#search4").click(function(){
            // console.log(123)
            layer.open({
                area: ['450px', '280px']
                ,title:'删除'
                ,type:1
                ,content: $('#addF_Search')
                ,btn: ['删除', '取消']
                ,cancel: function(){ 
                    $('#addF_Search').css('display','none')
                }
                ,yes: function(index, layero){
                    $.ajax({
                        url:getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                        data:{
                            OrderNo: receive1, 
                            OrderItem: receive7,
                            MaterialNo:receive11,
                            queryName:document.getElementById("queryName4").value,
                            queryCondition:document.getElementById("ueryCondition4").value,
                            queryValue:document.getElementById("queryValue4").value
                        },
                        success:function(res){
                            console.log(res)
                            table.render({
                                elem: '#demo4',
                                height: 315,
                                // url: getAjaxURL('/warpMachineJobSheet/getBeamBatchDetails'), //数据接口
                                data:res.data,
                                cols: [[ //表头
                                    {checkbox: true},
                                    {field: 'BATCH_NO', title: 'GB4盤頭批次', width:120},
                                    {field: 'BATCH_QNTY', title: '批次重量(KG)', width:120},
                                    {field: 'CREEL_NO', title: 'Creel No', width:120},
                                    {field: 'PRINT_FLAG', title: '工作中心', width:120},
                                ]],
                                done: function (res,curr,count) {
                                    $('.tab4 .layui-table-cell')[0].style.zIndex = '-2';
                                }
                            });
                            $("#queryValue4").val("");
                            layer.closeAll();
                            $('#addF_Search').css('display','none');
                        }
                    })
                    groups4 = {}
                    group4 = []
                }
                ,btn2: function(index, layero){
                    layer.closeAll();
                    $('#addF_Search').css('display','none')
                }
            });
        });
        //表格4-监听复选框选择--获取行数据
        table.on('checkbox(test4)', function(obj){
            // console.log(obj.checked); //当前是否选中状态
            // console.log(obj.data); //选中行的相关数据
            // console.log(obj.type); //如果触发的是全选，则为：all，如果触发的是单选，则为：one

            delete obj.data.UNIT;
            // delete obj.data.PRINT_FLAG;
            delete obj.data.LAY_TABLE_INDEX;
            // delete obj.data.CREEL_NO;
            delete obj.data.LAY_CHECKED;

            jusdge4 = obj.checked;
            console.log(jusdge4)
            unit4 = obj.data;
            if(jusdge4 == true){      //删除中判断是否有勾选框
                group4.push(obj.data)
            }else if(jusdge4 == false){
                group4.forEach(function(value,index){
                    if(cmp(group4[index],obj.data)==true){
                        group4.splice(index,1)    //删除相同的对象
                    };
                })
            };
            if(data4===undefined||data4.length==0){
                data4.push(unit4)
                console.log(data4)
            }else{
                try{        //跳出foreach循环
                    data4.forEach(function(value,index){
                        if(jusdge4 == true){
                            if(cmp(data4[index],unit4)==true){
                                // console.log("相等")
                                // console.log(index)
                                data4.splice(index,1)    //删除相同的对象
                                console.log(data4)
                            }
                        }else if(jusdge4 == false){
                            if(cmp(data4[index],unit4)!==true){
                                data4.push(unit4)
                                console.log(data4)
                                foreach.break=new Error("StopIteration");
                            }
                        }
                    })
                }catch(e){
                    console.log(e.message);
                    if(e.message==="foreach is not defined") {
                        console.log("跳出来了?");
                        return;
                    }else throw e;
                }//可以跳出来,那么 我们可以重写foreach方法
            }
        });
        
        
        $("#stamp").click(function(){
            console.log(135)
            console.log(group1)
            if(group1.length==0){
                // group1=null
            }else{
                groups1.checkedList = group1;
                groups1.ORDER_ITEM_NO=receive4
                groups1.MaterialNo=receive8
                // groups1.push(obj1)
            };
            if(group2.length==0){
                // group2=null
            }else{
                groups2.checkedList = group2;
                groups2.ORDER_ITEM_NO=receive5
                groups2.MaterialNo=receive9
                // groups2.push(obj2)
            };
            if(group3.length==0){
                // group3=null
            }else{
                groups3.checkedList = group3;
                groups3.ORDER_ITEM_NO=receive6
                groups3.MaterialNo=receive10
                // groups3.push(obj3)
            };
            if(group4.length==0){
                // group4=null
            }else{
                groups4.checkedList = group4;
                groups4.ORDER_ITEM_NO=receive7
                groups4.MaterialNo=receive11
                // groups4.push(obj4)
            };
            var arr=[];
            // arr.MACHINE_NO=receive3,
            // arr.JOBSHEET_NO=receive2,
            arr.push(groups1)
            arr.push(groups2)
            arr.push(groups3)
            arr.push(groups4) 
            console.log(arr)
            // return
            $.ajax({
                url:getAjaxURL('/warpMachineJobSheet/printBeamPickingList'), //数据接口
                data:{
                    userName:"a_test",
                    // userName:sessionStorage["loginName"],
                    OrderNo:receive1,
                    MACHINE_NO:receive3,
                    JOBSHEET_NO:receive2,
                    BeamPickList:JSON.stringify(arr)
                },
                success:function(data){
                    console.log("打印成功------------------------------")
                    console.log(data)

                    if (data.status == 200) {

                        file=data.data;
                        for(var par=0;par<file.length;par++){
                            // window.open(getAjaxURL(file[par]));
                            window.open(file[par]);
                        }
                    }else{
                        layer.alert(data.message, {
                            title: "提示"
                        });
                    }
                    // window.open('http://172.30.20.126:8080/mes'+data.data);

                }
            })
        })


















        
    })
    })
</script>
<script>
    /// QZ Config ///
    var cfg = null;
    // 0 qz 公共配置信息
    function getUpdatedConfig() {
        if (cfg == null) {
            cfg = qz.configs.create(null);
        }
        cfg.reconfigure({
                    altPrinting: false,
                    encoding: "",
                    endOfDoc: "",
                    perSpool: "",
                    colorType: "color",
                    copies: 1,
                    density: "",
                    duplex: false,
                    interpolation: "",
                    jobName: "",
                    margins: 0,
                    orientation: "",
                    paperThickness: "",
                    printerTray: "",
                    rasterize: true,
                    rotation: 0,
                    scaleContent: true,
                    size: null,
                    units: "in"
                });
        return cfg;
    }

    // 1 连接QZ print
    // function con2qz(){
    //     qz.websocket.connect().then(function() {
    //     }).catch(displayError);
    // }
    //var config = getUpdatedConfig();
    // 2 连接打印机
    // 
     // var file ='http://172.30.20.145:8080/MES/demo/assets/pdf_sample.pdf';
    // var file ='assets/2018031117162477-05c1c353-f531-41bc-a4a3-0392b317c99c.pdf';
    var file ='http://172.30.20.126:8080/mes/pdf_upload/2018031117162477-05c1c353-f531-41bc-a4a3-0392b317c99c.pdf';
    function con2printer(){
        // var printer = document.getElementById("printer").value;
        qz.websocket.connect().then(function() {
        console.log(qz.websocket.isActive());
       return qz.printers.getDefault();              // Pass the printer name into the next Promise
        }).then(function(printer) {
            config = getUpdatedConfig();
            config.setPrinter(printer);
            console.log(file);
            
           var data = [
                { type: 'pdf', data: file}
            ];
            return qz.print(config, data);
        
        }).catch(function(e) { console.error(e); });

    }

</script>

</html>

<!-- 公共方法 -->
<script>
    cmp = function( x, y ) { 
        if ( x === y ) { 
         return true; 
            if ( ! ( x instanceof Object ) || ! ( y instanceof Object ) ) { 
             return false; 
            } 
            if ( x.constructor !== y.constructor ) { 
             return false; 
            } 
        for ( var p in x ) { 
         if ( x.hasOwnProperty( p ) ) { 
             if ( ! y.hasOwnProperty( p ) ) { 
              return false; 
             } 
             if ( x[ p ] === y[ p ] ) { 
              continue; 
             } 
             if ( typeof( x[ p ] ) !== "object" ) { 
              return false; 
             } 
             if ( ! Object.equals( x[ p ], y[ p ] ) ) { 
              return false; 
             } 
         } 
        } 
            for ( p in y ) { 
                 if ( y.hasOwnProperty( p ) && ! x.hasOwnProperty( p ) ) { 
                 return false; 
                 } 
            } 
        return true; 
        }
    }
</script>
<style>
    .top{
        color: rgb(32,76,125);
        padding: 5px 15px;
        border-bottom: 2px rgb(30,140,195) solid;
    }
    .tops{
        padding: 5px 15px;
    }
    .topss{
        padding: 5px 4px;
        margin-left:20px; 
    }
    .shou{
        cursor: pointer;
    }
    .pad{
        padding: 20px;
    }
    .dis{
        display: none;
    }
    ul li{
        border: 1px #F2F2F2 solid;
        float: left;
        height: 25px;
        line-height: 25px;
        text-align: center;
    }
    .layui-table-view{
        margin: 0!important;
    }
</style>