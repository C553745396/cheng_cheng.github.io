<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>纬编机台产量报表</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="format-detection" content="telephone=no">
		<script type="text/javascript" src="plugins/servies.js" ></script>
		<link rel="stylesheet" href="plugins/layui/css/layui.css" media="all" />
		<!--<link rel="stylesheet" type="text/css" href="http://www.jq22.com/jquery/font-awesome.4.6.0.css">-->
	</head>

	<body>
		
			<div class="top">
				<span>$t('機台生產狀態查詢')</span>
			</div>
			<div style='margin:10px 0;'>
				
	        	<button class="layui-btn layui-btn-small" id="btnExcel" >Excel</button>
			</div>
		<div class="m">
			<table class="layui-table" lay-data="{height:315}" lay-filter="test" id="dome1">
			</table>
			<!--<ul id="ui1">
				<li class="li2">批次	</li>
				<li class="li2">品质评级</li>
				<li class="li2">重量</li>
				
			</ul>
			<ul id="ui2">
				<li class="li2">總計:</li>
				<li class="li2 li0_li2">0.00</li>
				<li class="li2 li1_li2">0.00</li>
				
			</ul>-->
			<div><i class="layui-icon shou" id='shou4'>&#x1002;</i></div>
			
		</div>
		
		<script type="text/javascript" src="plugins/layui/layuis.all.js"></script>
		<script type="text/javascript" src="build/js/jquery.js" ></script>
		<script src="build/js/di18n.js"></script>
        <script src="build/js/lang.js"></script>
		<script>

			var thisURL = document.URL;  
			var  getval =thisURL.split('?')[1];  
			var showval= getval.split("=")[1];  
			  console.log(thisURL)
		      console.log(getval)
		      console.log(showval)
		    var Colla=[ //表头
				         {field: 'PROD_ORDER', title: '工單號碼',unresize: true,width:100}
	                    ,{field: 'FABRIC_CODE', title: '布号',unresize: true,width:100}
	                    ,{field: 'YARN_DESC', title: '用纱描述',unresize: true,width:100}
	                    ,{field: 'MATERIAL_NO', title: '生产机号',unresize: true,width:100}
	                    ,{field: 'ROLL_NUMBER', title: '批次',unresize: true,width:100}
	                    ,{field: 'QUALITY', title: '品质评级',unresize: true,width:120}
	                    ,{field: 'WEIGHT', title: '重量',unresize: true,width:80}
			   			,{field: 'GR_DATE', title: '入仓日期',unresize: true,width:100}
			      		,{field: 'YARN_BATCH', title: '紗線批次',unresize: true,width:100}
			   			,{field: 'COLOR_DEPTH', title: '胚布深中浅',unresize: true,width:100}
			   			,{field: 'LOT_NUMBER', title: '胚布缸號',unresize: true,width:100}
			    	]
		    arrchangeL(Colla);
		    layui.use('table', function(){
				var table = layui.table;
				function aa(){
					table.render({
					    elem: '#dome1'
					    ,url: getAjaxURL("/weftMachineReport/getMachineReportDetailsDrillDown")
					    ,height: 315
					    ,method:'POST'
					    ,page: true //开启分页
					    ,response: {
		                      statusName: 'status' //数据状态的字段名称，默认：code
		                      ,statusCode: 200 //成功的状态码，默认：0
		                      ,msgName: 'message' //状态信息的字段名称，默认：msg
		                      ,countName: 'total' //数据总数的字段名称，默认：count
		                      ,dataName: 'list' //
		                    }
	//							    ,data:d
					    ,request: {
		                    pageName: 'page' //页码的参数名称，默认：page
		                    ,limitName: 'rows' //每页数据量的参数名，默认：limit
		                  } 
		                ,where: {prodOrd: showval}
					    ,cols: [Colla]
					    ,limit:10
	    				,limits:[10,30,50]
	//							    ,done:function(res, curr, count){
	//									console.log(res)
	//									$('.li0_li2').text(res.total.);
	//									$('.li1_li2').text(res.total.);
	//									//console.log($('.li0_li2')[0].innerText=res.total.totalConfirmQty)
	//									//console.log(res.total.totalConfirmQty)
	//								}
					});
				}
    			aa();
					//刷新页面
					var Ashou4=document.getElementById('shou4');
						Ashou4.onclick=function(){
							aa();
						}
			})
		    //导出Excel
		    var AbtnExcel=document.getElementById('btnExcel');
		    	AbtnExcel.onclick=function(){
		    		window.location.href=getAjaxURL("/weftMachineReport/detailExcel?prodOrd="+showval);
		    	}

    </script>
	</body>

</html>
<style scoped>
	.m{
		margin:0 15px;
		clear: both;
	}
	*{
    	margin: 0;
    	padding: 0;
    }
	.top{
		height: 22px;
		line-height: 22px;
		font-size: 16px;
		border-bottom: 1px rgb(26,160,148) solid;
	}
	.layui-input{
		height: 25px;
	}
	/*.v_d{
		visibility:hidden;
	}*/
	.layui-input-inline{
		padding: 9px 0;
		width: 170px!important;
	}
	.layui-form-label{
		width: auto;
		padding: 0 15px;
	}
	.clearfix:after{
		content: '';
		display: table;
		clear:both;
		visibility: hidden;
	}
	
	.f{
		float: left;
		display: block;
	}
	.r{
		color: red;
	}
	.layui-btn-small{
		padding: 0px 26px;
	}
	#input1{
		width: 20px;
		height: 20px;
	}
	
	#ui1 li,#ui2 li{float: left;border:1px solid #E2E2E2;text-align: center;height: 30px;line-height: 30px;}
	#ui1{height: 40px;}
	#ui2{clear: both;height: 40px;}
	#ui1 .li0,#ui2 .li0{width: 120px;}
	#ui1 .li1,#ui2 .li1{width: 60px;}
	#ui1 .li2,#ui2 .li2{width: 100px;}
	#ui1 .li3,#ui2 .li3{width: 100px;border-right:1px solid #E2E2E2}
	.layui-table-view{margin-bottom: 0px;}
	.laytable-cell-3-salesorder{text-align: center;}
	.layui-table td, .layui-table th{padding: 0px;}
	.layui-table-cell{padding: 0px;text-align: center;}
</style>