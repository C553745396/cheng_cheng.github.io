<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <title>交班表維護</title>
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="format-detection" content="telephone=no">

        <link rel="stylesheet" href="plugins/layui/css/layui.css" media="all" />
        <!-- <link rel="stylesheet" href="css/global.css" media="all"> -->
        <!--<link rel="stylesheet" type="text/css" href="http://www.jq22.com/jquery/font-awesome.4.6.0.css">-->
    </head>

    <body>
        <div class="m">
            <div class="top">
                <span>$t('緯編車間交班記錄創建')</span>
            </div>
            <div style='margin:10px 0;'>
                <button class="layui-btn layui-btn-small" id="create">$t('創建')</button>
                <button class="layui-btn layui-btn-small" id="view">$t('檢視')</button>
                <button class="layui-btn layui-btn-small" id="preview">$t('預覽')</button>
                <button class="layui-btn layui-btn-small">$t('打印')</button>
            </div>
            <div style="margin:10px 0;">
                <span>$t('參照日期')</span>
                <span class="r">*</span>
                <span>
                    <div class="layui-inline"> <!-- 注意：这一层元素并不是必须的 -->
                        <input type="text" class="layui-input" id="test1">
                    </div>
                </span>
            </div>
            <div style="margin:10px 0;">
                <span>$t('創建日期')</span>
                <span class="r">*</span>
                <span>
                    <div class="layui-inline"> <!-- 注意：这一层元素并不是必须的 -->
                        <input type="text" class="layui-input" id="test2" disabled>
                    </div>
                </span>
            </div>
            <div style="margin:10px 0;">
                <span>$t('生產車間')</span>
                <span class="v_d">*</span>
                <span>
                    <div class="layui-inline"> <!-- 注意：这一层元素并不是必须的 -->
                        <input type="text" value="" id="workshop">
                    </div>
                </span>
            </div>
            <div style="margin:10px 0;">
                <span>$t('車間分區')</span>
                <span class="v_d">*</span>
                <span>
                    <div class="layui-inline"> <!-- 注意：这一层元素并不是必须的 -->
                        <input type="text" value="" id="workshop_partitions">
                    </div>
                </span>
            </div>
            <div style="margin:10px 0;">
                <span>$t('打印無單機臺')</span>
                <span class="v_d">*</span>
                <span>
                    <div class="layui-inline"> <!-- 注意：这一层元素并不是必须的 -->
                        <input type="checkbox" value="" id="isPrint" />
                    </div>
                </span>
            </div>
            <div style="margin:10px 0;">
                <span>$t('編輯人')</span>
                <span class="r">*</span>
                &nbsp;&nbsp;
                <!-- <span class="v_d">好</span> -->
                <span>
                    <div class="layui-inline"> <!-- 注意：这一层元素并不是必须的 -->
                        <input type="text" value="a_test" id="editor" />
                    </div>
                </span>
            </div>
        </div>
        <script type="text/javascript" src="plugins/layui/layuis.all.js"></script>
        <script type="text/javascript" src="plugins/layui/lay/modules/tables.js" ></script>
        <script src="build/js/jquery.js"></script>
        <script src="build/js/di18n.js"></script>
        <script src="build/js/lang.js"></script>
        <script>
            var curDate = new Date();
            // var preDate = new Date(curDate.getTime() - 24*60*60*1000); //前一天
            // var nextDate = new Date(curDate.getTime() + 24*60*60*1000); //后一天
            var pdTimeStamp = curDate.getTime() - 24*60*60*1000;

            //默认参考日期为前一天 创建天数为当天不能修改
            var preDate = String(new Date(pdTimeStamp).getFullYear())+'-'+String(new Date(pdTimeStamp).getMonth() + 1)+'-'+String(new Date(pdTimeStamp).getDate());
            $('#test1').val(preDate);           
            var createDate = String(new Date().getFullYear())+'-'+String(new Date().getMonth() + 1)+'-'+String(new Date().getDate());
            $('#test2').val(createDate);           
            if (sessionStorage.loginName) {
                $('#editor').val(sessionStorage.loginName);
            }


            layui.use('laydate', function(){
              var laydate = layui.laydate;
              
              laydate.render({
                elem: '#test1' //指定元素
                // ,type:'datetime' //年月日或时间
                // ,range: '~' //时间段
                // ,format: 'yyyy年MM月dd日' //可任意组合
                // ,lang:'en'
              });

            });

            //创建
            $('#create').click(function(){
                var ct1 = $('#test1').val()+' 00:00:00';
                var ct2 = $('#test2').val()+' 00:00:00';

                var timestamp1 = Date.parse(new Date(ct1))/1000;
                var timestamp2 = Date.parse(new Date(ct2))/1000;

                //参考日期需要小于创建日期
                if (timestamp1 >= timestamp2) {
                    layer.alert('参照日期要小于当前日期');
                    return
                }

            })

            //檢視
            $('#view').click(function(){


                // window.open('weftShiftTableView.html?workshop='+$('#workshop').val()+'&workshop_partitions='+$('#workshop_partitions').val());

                window.location.href = 'weftShiftTableView.html?workshop='+$('#workshop').val()+'&workshop_partitions='+$('#workshop_partitions').val()+'&editor='+$('#edtior').val();
            })

            //预览
            $('#preview').click(function(){

                console.log($('#test1').val());
                console.log($('#test2').val());
                console.log($('#isPrint').is(':checked'));
                console.log($('#workshop').val());
                console.log($('#workshop_partitions').val());

                // $.ajax({
                //     url:getAjaxURL('/mes/'),
                //     data:{
                        
                //     },
                //     type:'POST',
                //     success:function(data){
                        
                //         if (data.status == 200) {
                //             window.open(data.)
                //         }
                //     }
                // })

            })


        </script>
    </body>

</html>
<style scoped>
    #test2{
        background:#ddd;
    }
    .m{
        margin:0 15px;
    }
    *{
        margin: 0;
        padding: 0;
    }
    .top{
        height: 22px;
        line-height: 22px;
        font-size: 16px;
        border-bottom: 1px rgb(26,160,148) solid;
    }
    .layui-input{
        height: 25px;
    }
    .v_d{
        visibility:hidden;
    }
    .layui-input-inline{
        padding: 9px 0;
        width: 170px!important;
    }
    .layui-form-label{
        width: auto;
    }
    .clearfix:after{
        content: '';
        display: table;
        clear:both;
        visibility: hidden;
    }
    .f{
        float: left;
    }
    .r{
        color: red;
    }
</style>