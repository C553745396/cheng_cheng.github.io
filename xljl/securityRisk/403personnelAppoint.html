<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>人员指派</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <link href="../style/index.css" rel="stylesheet" type="text/css">
    <link href="../public/style/public.css" rel="stylesheet" type="text/css">
    <link href="../css/public/zt_xingliTwo.css" rel="stylesheet" type="text/css">
	 <link href="../public/style/slideBar.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" src="../cordova.js"></script>
	<script type="text/javascript" src="../public/js/public.js"></script>
    <script type="text/javascript" src="../public/js/jquery.js"></script>
    <script type="text/javascript" src="../js/joint.js"></script>
    <script type="text/javascript" src="../js/show.js"></script>
    <script type="text/javascript" src="../js/AJAX/prodBuild.js"></script>
</head>
<body>
	<div class="indexPage">		
<section class="personnelAppoint">

    <div class="personnelAppointHeader">
        <p>已添加风险监理人员</p>
    </div>
    <div class="personnelAppointDetailS">
        <ul>
        	<li>
        		<div class="personnelname">
					<p class="threeName">姓名</p>
				</div>
				<div class="personnelstation">
					<p class="threeName">岗位</p></div>
					<div class="personneloperate">
						<span id="" class="threeName">操作</span>
					</div>
        	</li>
			<li>
				<div class="personnelAppointDetail1">
					<p class="fourName"></p>
				</div>
				<div class="personnelAppointDetail12">
					<p class="fourName"></p>
				</div>
				<div class="personnelAppointDetail13">
					<!--<span  class="fuhao1 fourName"></span><span id="">释放</span>-->
				</div>
			</li>
        </ul>
    </div>
    <div class="personnelAppointHeader">
        <p>从本工程添加</p>
    </div>
    <div class="personnelAppointDetail local">
        <ul>
        	<li>
        		<div class="personnelname">
					<p class="threeName">姓名</p>
				</div>
				<div class="personnelstation">
					<p class="threeName">岗位</p></div>
					<div class="personneloperate">
						<span id="" class="threeName">操作</span>
					</div>
        	</li>
			<li>
				<div class="personnelAppointDetail1">
					<p class="fourName"></p>
				</div>
				<div class="personnelAppointDetail12">
					<p class="fourName"></p>
				</div>
				<div class="personnelAppointDetail13">
					<!--<span  class="fuhao fourName"></span><span id="">添加</span>-->
				</div>
			</li>
        </ul>
    </div>
    
    <div class="personnelAppointHeader">
        <p>从其他工程添加</p>
    </div>
    <div class="personnelAppointDetail other">
        <ul>
        	<li>
        		<div class="personnelname">
					<p class="threeName">姓名</p>
				</div>
				<div class="personnelstation">
					<p class="threeName">岗位</p></div>
					<div class="personneloperate">
						<span id="" class="threeName">操作</span>
					</div>
        	</li>
			<li>
				<div class="personnelAppointDetail1">
					<p class="fourName"></p>
				</div>
				<div class="personnelAppointDetail12">
					<p class="fourName"></p>
				</div>
				<div class="personnelAppointDetail13">
					<!--<span  class="fuhao fourName"></span><span id="">添加</span>-->
				</div>
			</li>
        </ul>
    </div>
    <!--<div>
        <img src="../images/personAppointBK.png">
    </div>-->
    </div>
</section>
</body>
</html>
<script type="text/javascript">
$(function () {
//	var fsonObj = eval('(' + data.data022.request + ')');
//						    	fsonObj.data.riskid=tID
//						        var fsonStr = JSON.stringify(fsonObj);
//						        data.data022.request = fsonStr;
//						    	getJSON(url, data.data022, data022);
//						    	function data022(v){
////						    		alert(JSON.stringify(v))
//						    		$('.yitianjia').find('li').remove()
//						    		$('.bengongc').find('li').remove()
//						    		$('.qitagongc').find('li').remove()
//						    		if(v.data.dat0){
//						    			
//						    			var dataA = eval(v.data.dat0)
//						    			for(var i in dataA){
//						    				$('<li id='+dataA[i].userid+'><p >姓名:'+dataA[i].username+'</p><p>岗位:'+dataA[i].post+'</p><span id='+dataA[i].userid+' class="release"><strong  class="btn02">&nbsp;-&nbsp;释放</strong></span></li>').appendTo('.yitianjia')
//						    			}
//						    		}
//						    		if(v.data.dat1){
//						    			
//						    			var dataA = eval(v.data.dat1)
//						    			for(var i in dataA){
//						    				$('<li id='+dataA[i].userid+'><p  >姓名:'+dataA[i].username+'</p><p>岗位:'+dataA[i].post+'</p><span id='+dataA[i].userid+' class="addTo"><strong  class="btn01">+添加</strong></span></li>').appendTo('.bengongc')
//						    			}
//						    		}
//						    		if(v.data.dat2){
//						    			
//						    			var dataA = eval(v.data.dat2)
//						    			for(var i in dataA){
//						    				$('<li id='+dataA[i].userid+'><p  >姓名:'+dataA[i].username+'</p><p>岗位:'+dataA[i].post+'</p><span id='+dataA[i].userid+' class="addTo"><strong  class="btn01">+添加</strong></span></li>').appendTo('.qitagongc')
//						    			}
//						    		}
//						    	}
	
	
	
	
	
    document.addEventListener("deviceready", onDeviceReady, false); 
    var tID = window.location.search.split('=')[1];
    var fsonObj = eval('(' + data.data022.request + ')');
	fsonObj.data.riskid=tID
    var fsonStr = JSON.stringify(fsonObj);
    data.data022.request = fsonStr;
    function onDeviceReady() {
		getJSON(url, data.data022, data022);
    } 
    
    var dataObj;
	function data022(v){
		$('.personnelAppointDetailS ul').find('li').remove();
		$('<li><div class="personnelname"><p class="threeName">姓名</p></div><div class="personnelstation"><p class="threeName">岗位</p></div><div class="personneloperate"><span class="threeName" id="">操作</span></div></li>').appendTo('.personnelAppointDetailS ul');	
		$('.local ul').find('li').remove();
		$('<li><div class="personnelname"><p class="threeName">姓名</p></div><div class="personnelstation"><p class="threeName">岗位</p></div><div class="personneloperate"><span class="threeName" id="">操作</span></div></li>').appendTo('.local ul');	
		$('.other ul').find('li').remove();
		$('<li><div class="personnelname"><p class="threeName">姓名</p></div><div class="personnelstation"><p class="threeName">岗位</p></div><div class="personneloperate"><span class="threeName" id="">操作</span></div></li>').appendTo('.other ul');	
		
		if(v.data.dat0){
			$('.personnelAppointDetailS ul').find('li').remove();
			var dataA = eval(v.data.dat0)
			for(var i in dataA){
				var namePost = "无数据"
				if(dataA[i].post){
	            	namePost = dataA[i].post
	            }
				$('<li id='+dataA[i].userid+'><div class="personnelAppointDetail1"><p class="fourName">' +dataA[i].username+ '</p></div><div class="personnelAppointDetail12"><p class="fourName">' +namePost + '</p></div><div class="personnelAppointDetail13"><span  class="fuhao1 fourName" id="' +dataA[i].userid+ '"></span><span id="' +dataA[i].userid+ '">释放</span></div></li>').appendTo('.personnelAppointDetailS ul')
			}
	        $('.personnelAppointDetailS ul li:eq(0)').before('<li><div class="personnelname"><p class="threeName">姓名</p></div><div class="personnelstation"><p class="threeName">岗位</p></div><div class="personneloperate"><span class="threeName" id="">操作</span></div></li>');	
		}
		if(v.data.dat1){
			$('.local ul').find('li').remove();
			var dataA = eval(v.data.dat1)
			for(var i in dataA){
				var namePost = "无数据"
				if(dataA[i].post){
	            	namePost = dataA[i].post
	            }
				$('<li id='+dataA[i].userid+'><div class="personnelAppointDetail1"><p class="fourName">' + dataA[i].username + '</p></div><div class="personnelAppointDetail12"><p class="fourName">' + namePost + '</p></div><div class="personnelAppointDetail13"><span  class="fuhao fourName" id="' + dataA[i].userid + '"></span><span id="' + dataA[i].userid + '">添加</span></div></li>').appendTo('.local ul')
			}
	        $('.local ul li:eq(0)').before('<li><div class="personnelname"><p class="threeName">姓名</p></div><div class="personnelstation"><p class="threeName">岗位</p></div><div class="personneloperate"><span class="threeName" id="">操作</span></div></li>');	
		}
		if(v.data.dat2){
			$('.other ul').find('li').remove();
			var dataA = eval(v.data.dat2)
			for(var i in dataA){
				var namePost = "无数据"
				if(dataA[i].post){
	            	namePost = dataA[i].post
	            }
				$('<li id='+dataA[i].userid+'><div class="personnelAppointDetail1"><p class="fourName">' + dataA[i].username + '</p></div><div class="personnelAppointDetail12"><p class="fourName">' + namePost + '</p></div><div class="personnelAppointDetail13"><span  class="fuhao fourName" id="' + dataA[i].userid + '"></span><span id="' + dataA[i].userid + '">添加</span></div></li>').appendTo('.other ul')
			}
	        $('.other ul li:eq(0)').before('<li><div class="personnelname"><p class="threeName">姓名</p></div><div class="personnelstation"><p class="threeName">岗位</p></div><div class="personneloperate"><span class="threeName" id="">操作</span></div></li>');	
		}
	       
	}
	$('.personnelAppointDetailS ul').delegate('li span', 'click', function (e) {
		var usID = e.target.id
		if(usID==""){
        	usID = e.target.parentNode.id;
        	if(usID==""){
        		usID = e.target.parentNode.parentNode.id;
        		if(usID==""){
	        		usID = e.target.parentNode.parentNode.parentNode.id;
	        	}
        	}
        }
		var fsonObj = eval('(' + data.data023.request + ')');
    	fsonObj.data.riskid=tID
    	fsonObj.data.userid=usID
    	fsonObj.data.operation='2'
        var fsonStr = JSON.stringify(fsonObj);
        data.data023.request = fsonStr;
    	getJSON(url, data.data023, data023);
    	function data023(v){
    		if(v.head){
				if(v.head.resp=='000000'){
					getJSON(url, data.data022, data022);
				}else{
					qikoo.dialog.alert("人员释放失败")
				}
			}
    	}
		
		
	})
	$('.local ul').delegate('li span', 'click', function (e) {
		var usID = e.target.id
		if(usID==""){
        	usID = e.target.parentNode.id;
        	if(usID==""){
        		usID = e.target.parentNode.parentNode.id;
        		if(usID==""){
	        		usID = e.target.parentNode.parentNode.parentNode.id;
	        	}
        	}
        }
		var fsonObj = eval('(' + data.data023.request + ')');
    	fsonObj.data.riskid=tID
    	fsonObj.data.userid=usID
    	fsonObj.data.operation='1'
        var fsonStr = JSON.stringify(fsonObj);
        data.data023.request = fsonStr;
    	getJSON(url, data.data023, data023);
    	function data023(v){
    		if(v.head){
				if(v.head.resp=='000000'){
					getJSON(url, data.data022, data022);
				}else{
					qikoo.dialog.alert("人员添加失败")
				}
			}
    	}
	})
	$('.other ul').delegate('li span', 'click', function (e) {
		var usID = e.target.id
		if(usID==""){
        	usID = e.target.parentNode.id;
        	if(usID==""){
        		usID = e.target.parentNode.parentNode.id;
        		if(usID==""){
	        		usID = e.target.parentNode.parentNode.parentNode.id;
	        	}
        	}
        }
		var fsonObj = eval('(' + data.data023.request + ')');
    	fsonObj.data.riskid=tID
    	fsonObj.data.userid=usID
    	fsonObj.data.operation='1'
        var fsonStr = JSON.stringify(fsonObj);
        data.data023.request = fsonStr;
    	getJSON(url, data.data023, data023);
    	function data023(v){
    		if(v.head){
				if(v.head.resp=='000000'){
					getJSON(url, data.data022, data022);
				}else{
					qikoo.dialog.alert("人员添加失败")
				}
			}
    	}
	})
})	
</script>